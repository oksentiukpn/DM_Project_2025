DM Project 2025 ‚Äî HLA Matcher & Donor‚ÄìRecipient Optimization System

üî¨ HLA-Matcher ‚Äî —Ü–µ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ –ø—ñ–¥–±–æ—Ä—É –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏—Ö –ø–∞—Ä —Ä–µ—Ü–∏–ø—ñ—î–Ω—Ç‚Äì–¥–æ–Ω–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —ó—Ö–Ω—ñ—Ö HLA-–∞–ª–µ–ª–µ–π.
–ü—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î –º–æ–¥—É–ª—å –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Å—Ö–æ–∂–æ—Å—Ç—ñ –∞–ª–µ–ª—ñ–≤, –ø–æ–±—É–¥–æ–≤—É –º–∞—Ç—Ä–∏—Ü—ñ –ø–æ–¥—ñ–±–Ω–æ—Å—Ç—ñ, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –∑–∞ –ø–æ—Ä–æ–≥–æ–º –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç–µ–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –£–≥–æ—Ä—Å—å–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É (Hungarian Algorithm).

üìå –ú–µ—Ç–∞ ‚Äî –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —Ç–æ—á–Ω–∏–π —ñ —à–≤–∏–¥–∫–∏–π –≤–∏–±—ñ—Ä –¥–æ–Ω–æ—Ä–∞ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä–µ—Ü–∏–ø—ñ—î–Ω—Ç–∞ –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ —Ç–∞ –≥–∞—Ä–∞–Ω—Ç—ñ—î—é, —â–æ –∫–æ–∂–Ω–æ–≥–æ –¥–æ–Ω–æ—Ä–∞ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –Ω–µ –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É.


---

üöÄ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚úîÔ∏è –û—Ü—ñ–Ω–∫–∞ –∑–±—ñ–≥—É –∞–ª–µ–ª–µ–π (–ø–æ–≤–Ω–∏–π –∑–±—ñ–≥, —á–∞—Å—Ç–∫–æ–≤–∏–π –∑–±—ñ–≥, –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–±—ñ–≥—É)

‚úîÔ∏è –ü–æ–±—É–¥–æ–≤–∞ –º–∞—Ç—Ä–∏—Ü—ñ –ø–æ–¥—ñ–±–Ω–æ—Å—Ç—ñ –º—ñ–∂ —É—Å—ñ–º–∞ –ø–∞—Ä–∞–º–∏ —Ä–µ—Ü–∏–ø—ñ—î–Ω—Ç‚Äì–¥–æ–Ω–æ—Ä

‚úîÔ∏è –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —ó—ó —É –≤–∞—Ä—Ç—ñ—Å–Ω—É –º–∞—Ç—Ä–∏—Ü—é –¥–ª—è —É–≥–æ—Ä—Å—å–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É

‚úîÔ∏è –°–∫–∞—Å—É–≤–∞–Ω–Ω—è –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤, —è–∫—ñ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –ø–æ—Ä—ñ–≥ —Å—Ö–æ–∂–æ—Å—Ç—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, <60%)

‚úîÔ∏è –í–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Hungarian Algorithm –∑ –Ω—É–ª—è

‚úîÔ∏è –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤–µ–ª–∏–∫–∏—Ö –º–∞—Ç—Ä–∏—Ü—å (–¥–æ 30√ó30 —ñ –±—ñ–ª—å—à–µ)

‚úîÔ∏è –ü–æ–≤–Ω–∏–π –Ω–∞–±—ñ—Ä —é–Ω—ñ–Ω—Ç-—Ç–µ—Å—Ç—ñ–≤

‚úîÔ∏è –ß—ñ—Ç–∫–∞ –º–æ–¥—É–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞



---

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

project/
‚îú‚îÄ‚îÄ matcher/                # CLI, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è, –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ cli.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ io_utils.py
‚îÇ   ‚îî‚îÄ‚îÄ validators.py
‚îÇ
‚îú‚îÄ‚îÄ scoring/                # –ê–ª–≥–æ—Ä–∏—Ç–º–∏ –æ—Ü—ñ–Ω–∫–∏ –∞–ª–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ scoring.py
‚îÇ
‚îú‚îÄ‚îÄ tests/                  # –û—Å–Ω–æ–≤–Ω—ñ —Ç–µ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ test_scoring.py
‚îú‚îÄ‚îÄ tests1/                 # –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–µ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ test1.py
‚îÇ   ‚îî‚îÄ‚îÄ test2.py
‚îÇ
‚îú‚îÄ‚îÄ matching.py             # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —É–≥–æ—Ä—Å—å–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É
‚îú‚îÄ‚îÄ matrix_builder.py       # –ü–æ–±—É–¥–æ–≤–∞ –º–∞—Ç—Ä–∏—Ü—ñ –ø–æ–¥—ñ–±–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ hla-matcher             # –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
‚îî‚îÄ‚îÄ README.md               # –¶–µ–π —Ñ–∞–π–ª


---

üß¨ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏

1. –ö–æ–∂–Ω–∞ –ª—é–¥–∏–Ω–∞ –æ–ø–∏—Å—É—î—Ç—å—Å—è –º–Ω–æ–∂–∏–Ω–æ—é HLA-–∞–ª–µ–ª–µ–π, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

A*02:01, B*15:17, DRB1*11:01


2. –î–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏ (—Ä–µ—Ü–∏–ø—ñ—î–Ω—Ç, –¥–æ–Ω–æ—Ä) —Å–∏—Å—Ç–µ–º–∞ –æ–±—á–∏—Å–ª—é—î:

–ø–æ–≤–Ω–∏–π –∑–±—ñ–≥ ‚Üí 2 –±–∞–ª–∏

—á–∞—Å—Ç–∫–æ–≤–∏–π –∑–±—ñ–≥ –ª–æ–∫—É—Å—É ‚Üí 1 –±–∞–ª

–≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–±—ñ–≥—É ‚Üí 0 –±–∞–ª—ñ–≤



3. –ù–∞ –æ—Å–Ω–æ–≤—ñ —Ü–∏—Ö –±–∞–ª—ñ–≤ —Ñ–æ—Ä–º—É—î—Ç—å—Å—è –º–∞—Ç—Ä–∏—Ü—è –ø–æ–¥—ñ–±–Ω–æ—Å—Ç—ñ.


4. –ü–æ–¥—ñ–±–Ω—ñ—Å—Ç—å ‚Üí –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —É –≤–∞—Ä—Ç—ñ—Å—Ç—å:

cost = 1 - similarity


5. –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ—ñ–ª—å—Ç—Ä—É—î –ø–∞—Ä–∏, —è–∫—ñ –º–∞—é—Ç—å < 60% –ø—Ä–∏–π–Ω—è—Ç–Ω–æ—Å—Ç—ñ.


6. –î–∞–ª—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Hungarian Algorithm –¥–ª—è –ø–æ—à—É–∫—É –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç–µ–π.


7. –í–∏—Ö—ñ–¥ ‚Äî –Ω–∞–±—ñ—Ä –ø–∞—Ä:

Recipient R_i ‚Üí Donor D_j




---

üß™ –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

1. –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –º–∞—Ç—Ä–∏—Ü—é –ø–æ–¥—ñ–±–Ω–æ—Å—Ç—ñ:

from matrix_builder import build_similarity_matrix

recipients = [...]
donors = [...]
matrix = build_similarity_matrix(recipients, donors)
print(matrix)

2. –ü–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–∞ –≤–∏—Ç—Ä–∞—Ç–∏ —Ç–∞ –∑–Ω–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ:

from matching import convert_similarity, remove_not_accepted, match

sim = build_similarity_matrix(recipients, donors)
cost = convert_similarity(sim)
filtered = remove_not_accepted(cost)

result = match(filtered)
print("Matches:", result)


---

üîß CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–≥–æ—Ç–æ–≤–∏–π –¥–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó)

python -m matcher --recipients recs.json --donors dons.json --threshold 0.6

–í–∏–≤–µ–¥–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON.


---

üìä –°—Ö–µ–º–∞—Ç–∏—á–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É

HLA Data ‚Üí Scoring ‚Üí Similarity Matrix ‚Üí Cost Matrix ‚Üí Hungarian Algorithm ‚Üí Optimal Match


---

üß© –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —É–≥–æ—Ä—Å—å–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É

–ü—Ä–æ—î–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –≤–ª–∞—Å–Ω—É —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—é –∞–ª–≥–æ—Ä–∏—Ç–º—É –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é:

—Ä–µ–¥—É–∫—Ü—ñ—ó —Ä—è–¥–∫—ñ–≤ —ñ —Å—Ç–æ–≤–ø—Ü—ñ–≤

–ø–æ–±—É–¥–æ–≤–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–∫—Ä–∏–≤–Ω–∏—Ö –ª—ñ–Ω—ñ–π

–¥–æ–±—É–¥–æ–≤–∏ –Ω—É–ª—å–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –ø–æ—à—É–∫—É –¥–æ—Å–∫–æ–Ω–∞–ª–æ–≥–æ –ø–∞—Ä–æ—Å–ø–æ–ª—É—á–µ–Ω–Ω—è



---

‚úîÔ∏è –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤:

pytest -v

–ü—Ä–æ—î–∫—Ç –º—ñ—Å—Ç–∏—Ç—å —é–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏ –¥–ª—è:

scoring —Å–∏—Å—Ç–µ–º–∏

–ø–æ–±—É–¥–æ–≤–∏ –º–∞—Ç—Ä–∏—Ü—å

—É–≥–æ—Ä—Å—å–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É

–∫—Ä–∞–π–æ–≤–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ (INF, –≤–µ–ª–∏–∫—ñ –º–∞—Ç—Ä–∏—Ü—ñ, –≤–∏—Ä–æ–¥–∂–µ–Ω—ñ –º–∞—Ç—Ä–∏—Ü—ñ)



---

üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

git clone https://github.com/yourusername/DM_Project_2025.git
cd DM_Project_2025
pip install -r requirements.txt


---

üõ† –ü–ª–∞–Ω–∏ –Ω–∞ –º–∞–π–±—É—Ç–Ω—î

–î–æ–¥–∞—Ç–∏ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—é HLA-—Å—Ç—Ä—É–∫—Ç—É—Ä

–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –ø—ñ–¥ GPU / NumPy

–ü—ñ–¥—Ç—Ä–∏–º–∫—É –Ω–µ—á—ñ—Ç–∫–æ—ó –ª–æ–≥—ñ–∫–∏ –∑–±—ñ–≥—ñ–≤

–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ –∫–ª—ñ–Ω—ñ—á–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏



---

üôå –ê–≤—Ç–æ—Ä–∏

–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ–Ω–∞–Ω–∏–π —É —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å—É –∑ –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ–≥–æ –º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è, 2025.


---
